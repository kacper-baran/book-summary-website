import{q as F,_ as $,u as A,A as U,B as W,s as H,j as B,r as b,y as a,o as l,c as _,b as i,w as d,n as g,a as o,H as L,d as k,t as r,k as p}from"./index-08fce38b.js";import{u as M}from"./summaryStore-c2547216.js";import{u as O,I as j,a as q}from"./handleSaved-44c41ff2.js";var E=F("star-filled","IconStarFilled",[["path",{d:"M8.243 7.34l-6.38 .925l-.113 .023a1 1 0 0 0 -.44 1.684l4.622 4.499l-1.09 6.355l-.013 .11a1 1 0 0 0 1.464 .944l5.706 -3l5.693 3l.1 .046a1 1 0 0 0 1.352 -1.1l-1.091 -6.355l4.624 -4.5l.078 -.085a1 1 0 0 0 -.633 -1.62l-6.38 -.926l-2.852 -5.78a1 1 0 0 0 -1.794 0l-2.853 5.78z","stroke-width":"0",fill:"currentColor",key:"svg-0"}]]),P=F("star","IconStar",[["path",{d:"M12 17.75l-6.172 3.245l1.179 -6.873l-5 -4.867l6.9 -1l3.086 -6.253l3.086 6.253l6.9 1l-5 4.867l1.179 6.873z",key:"svg-0"}]]);const R={key:0},G={class:"book-details"},J={class:"book"},K={class:"info-container"},Q={class:"info"},X={class:"category"},Y={class:"controls"},Z={class:"icon"},ee={class:"icon"},oe={class:"button-container"},se={key:0},te={key:0},ae={class:"summary"},ne={key:1},le={__name:"BookDetails",props:["bookId"],setup(I){const f=A(),t=U(),S=W(),u=M(),c=I,{addToSaved:w,removeFromSaved:C}=O(c.bookId);H(()=>{u.summary&&(u.summary=null)});const e=B(()=>S.books.find(n=>n.id===c.bookId)),h=B(()=>t.favoriteSummaries.includes(c.bookId)),x=()=>{f.back()},z=()=>{u.loadSummary(c.bookId)},D=async n=>{h.value||(e.value.isFavorite=!0,t.user.favoriteSummaries.push(n),t.updateFavorites())},T=async n=>{if(h.value){const s=t.favoriteSummaries.indexOf(n);t.favoriteSummaries.splice(s,1),e.value.isFavorite=!1,t.updateFavorites()}},N=n=>{if(confirm("Are you sure you want to delete this summary? This action is irreversible")){const m=t.writtenSummaries.indexOf(n);t.writtenSummaries.splice(m,1),t.updateWrittenSummaries(),u.deleteSummary(n),S.deleteBook(n),f.replace("/bookapp/discover")}};return(n,s)=>{const m=b("base-button"),y=b("base-section"),V=b("base-heading");return e.value.length!==0&&a(t).user?(l(),_("div",R,[i(y,{width:"narrow",bg:"white"},{default:d(()=>[o("button",{class:"back-button",onClick:x},[i(a(L)),k(" Back ")]),o("div",G,[o("div",J,[o("p",null,r(e.value.title),1),o("p",null,r(e.value.author),1)]),o("div",K,[o("div",Q,[o("p",X,r(e.value.category),1),o("h3",null,r(e.value.title),1),o("p",null,"By "+r(e.value.author),1),o("p",null,"Summarized by "+r(e.value.summarizedByUsername),1)]),o("div",Y,[o("div",Z,[e.value.isFavorite?(l(),p(a(E),{key:0,class:"icon",size:30,color:"#FFD700",onClick:s[0]||(s[0]=v=>T(e.value.id))})):(l(),p(a(P),{key:1,class:"icon",size:30,onClick:s[1]||(s[1]=v=>D(e.value.id))}))]),o("div",ee,[e.value.isSaved?(l(),p(a(j),{key:0,class:"icon",size:30,color:"#48dfe3",onClick:s[2]||(s[2]=v=>a(C)(e.value.id))})):(l(),p(a(q),{key:1,class:"icon",size:30,onClick:s[3]||(s[3]=v=>a(w)(e.value.id))}))])])])]),o("div",oe,[i(m,{onClick:z},{default:d(()=>[k("Load summary")]),_:1}),a(t).writtenSummaries.includes(e.value.id)?(l(),_("div",se,[i(m,{onClick:s[4]||(s[4]=v=>N(e.value.id)),mode:"delete"},{default:d(()=>[k(" Delete ")]),_:1})])):g("",!0)])]),_:1}),a(u).summary?(l(),_("div",te,[i(y,{width:"narrow",bg:"light-grey"},{default:d(()=>[o("div",ae,r(a(u).summary),1)]),_:1})])):g("",!0)])):(l(),_("div",ne,[i(y,null,{default:d(()=>[i(V,null,{title:d(()=>[k("Page not Found")]),_:1})]),_:1})]))}}},de=$(le,[["__scopeId","data-v-75dbba37"]]);export{de as default};
