import{_ as z,B as D,A as T,h as F,u as L,D as _,i as w,E as N,r as g,o as u,k as R,w as b,b as B,d as x,a as t,m as h,v as V,z as p,c as n,n as y,G as H,C as W,F as G,l as Y,t as j,p as q,f as J}from"./index-00b8e62f.js";import{u as K}from"./summaryStore-acace4e7.js";const d=c=>(q("data-v-1325e681"),c=c(),J(),c),O=["onSubmit"],Q={class:"form-field"},X=d(()=>t("label",{for:"title"},"Title of the book:",-1)),Z={key:0},$={class:"form-field"},ee=d(()=>t("label",{for:"author"},"Author of the book:",-1)),te={key:0},ae={class:"form-field"},oe=d(()=>t("label",{for:"summary"},"Summary content:",-1)),se={key:0},re={class:"form-field"},le=d(()=>t("label",{for:"category"},"Choose a Category: ",-1)),ie=d(()=>t("option",{disabled:"",value:""},"Select a category",-1)),ue=["value"],ne={key:0},de={__name:"AddSummary",setup(c){const C=D(),E=K(),m=T(),k=F(),I=L(),o=_({value:"",isValid:!0}),s=_({value:"",isValid:!0}),r=_({value:"",isValid:!0}),i=_({value:"",isValid:!0}),A=w(["Economics","Business","Entrepreneurship","Health","Productivity","Sales","Psychology","Self-improvement","Communication","Management / Leadership","Motivation","Money / Finance","Relationships","Spiritual","Philosophy","Career / Success","Mental health"]),f=w(!0),U=()=>{[o,s,r,i].forEach(e=>{e.isValid=!0})};N((e,l,v)=>{if(o.value.length>0||s.value.length>0||r.value.length>0){const S=confirm("are you sure you want to leave this page? You have unsaved changes!");v(S)}else v(!0)});const M=()=>{if(U(),f.value=!0,[o,s,r,i].forEach(e=>{(e.value===""||e.value.length<3)&&(e.isValid=!1,f.value=!1)}),f.value)try{const e=new Date().getTime();C.addBook({id:e.toString(),title:o.value,author:s.value,category:i.value,releaseDate:e,summarizedByUserId:k.userId,summarizedByUsername:m.user.username}),E.addSummary({id:e.toString(),summary:r.value,summarizedByUserId:k.userId}),m.user.writtenSummaries.push(e.toString()),console.log(m.user.writtenSummaries),m.updateWrittenSummaries(),o.value="",s.value="",r.value="",i.value="",I.replace("/bookapp/mylibrary")}catch(e){console.log(e.message)}};return(e,l)=>{const v=g("base-heading"),S=g("base-button"),P=g("base-section");return u(),R(P,null,{default:b(()=>[B(v,null,{title:b(()=>[x(" Add a new summary ")]),_:1}),t("form",{onSubmit:Y(M,["prevent"])},[t("div",Q,[X,h(t("input",{class:p({error:!o.isValid}),type:"text",id:"title","onUpdate:modelValue":l[0]||(l[0]=a=>o.value=a),placeholder:"Enter the title of the book"},null,2),[[V,o.value,void 0,{trim:!0}]]),o.isValid?y("",!0):(u(),n("p",Z,"Please eneter a valid title"))]),t("div",$,[ee,h(t("input",{class:p({error:!s.isValid}),type:"text",id:"author","onUpdate:modelValue":l[1]||(l[1]=a=>s.value=a),placeholder:"Enter the name of the Author "},null,2),[[V,s.value,void 0,{trim:!0}]]),s.isValid?y("",!0):(u(),n("p",te,"Please eneter a valid author name"))]),t("div",ae,[oe,h(t("textarea",{class:p({error:!r.isValid}),id:"summary",rows:"10","onUpdate:modelValue":l[2]||(l[2]=a=>r.value=a),placeholder:"Here you can write the summary"},null,2),[[V,r.value]]),r.isValid?y("",!0):(u(),n("p",se," Please eneter a valid summary content "))]),t("div",re,[le,h(t("select",{id:"category","onUpdate:modelValue":l[3]||(l[3]=a=>i.value=a),class:p({error:!i.isValid})},[ie,(u(!0),n(G,null,W(A.value,a=>(u(),n("option",{key:a,value:a},j(a),9,ue))),128))],2),[[H,i.value,void 0,{trim:!0}]]),i.isValid?y("",!0):(u(),n("p",ne,"Please select a valid category"))]),B(S,{mode:"accent"},{default:b(()=>[x("Submit")]),_:1})],40,O)]),_:1})}}},ve=z(de,[["__scopeId","data-v-1325e681"]]);export{ve as default};
